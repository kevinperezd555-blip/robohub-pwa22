<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>🤖 RoboHub Ultimate</title>
<style>
body { font-family:'Segoe UI', sans-serif; margin:0; background:#0f0f20; color:#fff; overflow-x:hidden; transition:0.5s;}
nav { background:#121232; padding:10px 20px; display:flex; justify-content:space-between; align-items:center; box-shadow:0 0 20px #0ff;}
nav button { padding:5px 10px; border:none; border-radius:5px; cursor:pointer; background:#2575fc; color:white; transition:0.3s; }
nav button:hover { box-shadow:0 0 15px #0ff; transform:scale(1.05);}
.container { display:grid; grid-template-columns:1fr 1fr; gap:20px; padding:20px; }
.card { background:rgba(20,20,40,0.85); padding:15px; border-radius:10px; transition:0.3s; box-shadow:0 0 15px #0ff;}
.card:hover { box-shadow:0 0 25px #0ff; transform:scale(1.02);}
ul { list-style:none; padding:0; }
li { background:rgba(30,30,60,0.85); margin:5px 0; padding:8px; border-radius:5px; cursor:pointer; transition:0.3s;}
li:hover { background:#0ff; color:#111; transform:scale(1.05); }
input, select { width:100%; padding:6px; margin-bottom:10px; border-radius:5px; border:1px solid #0ff; background:#121232; color:white; transition:0.3s;}
.btn { padding:6px 10px; border:none; border-radius:5px; background:#2575fc; color:white; cursor:pointer; margin-top:5px; transition:0.3s;}
.btn:hover { box-shadow:0 0 15px #0ff; transform:scale(1.05);}
.light-mode { background:#f0f0f0; color:#111; }
.light-mode .card { background:#fff; color:#111; }
.light-mode input, .light-mode select { background:#eee; color:#111; border:1px solid #111; }
#particleCanvas { position:fixed; top:0; left:0; width:100%; height:100%; z-index:-1; }
#toast { position:fixed; bottom:10px; right:10px; background:#222; color:white; padding:10px 15px; border-radius:5px; display:none; z-index:20; box-shadow:0 0 10px #0ff; }
.sparkle { position:absolute; width:5px; height:5px; border-radius:50%; background:#0ff; pointer-events:none; animation:sparkleAnim 1s linear forwards;}
@keyframes sparkleAnim {0%{opacity:1;}100%{opacity:0; transform:translateY(-20px) scale(2);}}
</style>
</head>
<body>

<canvas id="particleCanvas"></canvas>
<div id="toast"></div>

<!-- LOGIN -->
<div id="loginScreen" style="display:flex; justify-content:center; align-items:center; height:100vh;">
  <div style="background:#111133; padding:30px; border-radius:10px; width:300px; text-align:center;">
    <h2>🤖 RoboHub Ultimate</h2>
    <input id="username" placeholder="Username"><br>
    <input id="password" type="password" placeholder="Password"><br>
    <button class="btn" onclick="signIn()">Sign In</button>
    <button class="btn" style="background:#0ff;color:#111;" onclick="autofillDemo()">Quick Demo</button>
  </div>
</div>

<!-- MAIN APP -->
<div id="mainApp" style="display:none;">
<nav>
  <div>🤖 RoboHub - <span id="navUser"></span> (<span id="role">User</span>)</div>
  <div>
    <button onclick="toggleTheme()">🌓 Toggle Theme</button>
    <button onclick="signOut()" style="background:#ff4444;">Logout</button>
  </div>
</nav>

<div class="container">
  <div class="card">
    <h3>📦 Inventory</h3>
    <ul id="inventoryList"></ul>
    <button class="btn" onclick="addInventory()">+ Add Item</button>
    <button class="btn" onclick="restockAll()">💫 Restock All</button>
  </div>

  <div class="card">
    <h3>📝 Task Board</h3>
    <ul id="taskList"></ul>
    <button class="btn" onclick="addTask()">+ Add Task</button>
    <button class="btn" onclick="generateRandomTask()">🎲 Random Task</button>
    <button class="btn" onclick="clearTasks()">🗑️ Clear Completed</button>
  </div>

  <div class="card" style="grid-column:span 2;">
    <h3>📊 Dashboard</h3>
    <div>Overdue Tasks: <span id="statTasks">0</span></div>
    <div>Low Stock Items: <span id="statLow">0</span></div>
  </div>
</div>
</div>

<script>
// PARTICLE BACKGROUND
const canvas = document.getElementById('particleCanvas');
const ctx = canvas.getContext('2d');
canvas.width = window.innerWidth; canvas.height = window.innerHeight;
let particles = [];
for(let i=0;i<150;i++){ particles.push({x:Math.random()*canvas.width, y:Math.random()*canvas.height, r:Math.random()*2+1, dx:(Math.random()-0.5)*0.7, dy:(Math.random()-0.5)*0.7}); }
function animateParticles(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  particles.forEach(p=>{
    p.x+=p.dx; p.y+=p.dy;
    if(p.x<0||p.x>canvas.width)p.dx*=-1;
    if(p.y<0||p.y>canvas.height)p.dy*=-1;
    ctx.beginPath(); ctx.arc(p.x,p.y,p.r,0,Math.PI*2); ctx.fillStyle='rgba(0,255,255,0.3)'; ctx.fill();
  });
  requestAnimationFrame(animateParticles);
}
animateParticles();
window.onresize=()=>{canvas.width=window.innerWidth; canvas.height=window.innerHeight;};

// APP LOGIC
let inventory=[], tasks=[];
function showToast(msg){ const t=document.getElementById('toast'); t.textContent=msg; t.style.display='block'; setTimeout(()=>{t.style.display='none';},1500); }
function signIn(){
  const u=document.getElementById('username').value.trim();
  const p=document.getElementById('password').value;
  if(!u || !p){ alert("Enter username & password"); return;}
  document.getElementById('loginScreen').style.display='none';
  document.getElementById('mainApp').style.display='block';
  document.getElementById('navUser').textContent=u;
  document.getElementById('role').textContent=(u.toLowerCase()==='admin')?'Admin':'User';
  renderAll(); showToast('Welcome '+u);
}
function autofillDemo(){ document.getElementById('username').value="demoUser"; document.getElementById('password').value="demo"; }
function signOut(){ document.getElementById('mainApp').style.display='none'; document.getElementById('loginScreen').style.display='flex'; showToast('Signed out'); }
function toggleTheme(){ document.body.classList.toggle('light-mode'); }

function renderInventory(){
  const list=document.getElementById('inventoryList'); list.innerHTML='';
  inventory.forEach((item,i)=>{
    const li=document.createElement('li');
    li.textContent=item.name+' ('+item.quantity+')';
    li.onclick=()=>{
      item.quantity--; if(item.quantity<=0) inventory.splice(i,1); renderAll(); showToast('Used 1 '+item.name); createSparkle(li);
    }; list.appendChild(li);
  });
}

function renderTasks(){
  const list=document.getElementById('taskList'); list.innerHTML='';
  tasks.forEach((t,i)=>{
    const li=document.createElement('li'); li.textContent=t.name+' ['+t.assignee+']';
    li.onclick=()=>{ tasks.splice(i,1); renderAll(); showToast('Completed: '+t.name); createSparkle(li);}
    list.appendChild(li);
  });
}

function updateStats(){
  document.getElementById('statTasks').textContent=tasks.length;
  document.getElementById('statLow').textContent=inventory.filter(i=>i.quantity<=2).length;
}

function renderAll(){ renderInventory(); renderTasks(); updateStats(); }

// BUTTON ACTIONS
function addInventory(){ const n=prompt("Item Name"); const q=parseInt(prompt("Quantity")); if(n && q>0) inventory.push({name:n,quantity:q}); renderAll(); showToast('Added '+n);}
function addTask(){ const n=prompt("Task Name"); const a=prompt("Assignee"); if(n && a) tasks.push({name:n,assignee:a}); renderAll(); showToast('Added task: '+n);}
function restockAll(){ inventory.forEach(i=>i.quantity=5); renderAll(); showToast('All items restocked');}
function generateRandomTask(){ const options=['Build Chassis','Wire Motors','Test Sensors','Calibrate Arm']; const n=options[Math.floor(Math.random()*options.length)]; tasks.push({name:n,assignee:'Auto'}); renderAll(); showToast('Random task added');}
function clearTasks(){ tasks=[]; renderAll(); showToast('All tasks cleared'); }

function createSparkle(element){
  const sparkle=document.createElement('div');
  sparkle.className='sparkle';
  const rect=element.getBoundingClientRect();
  sparkle.style.left=(rect.left+rect.width/2)+'px';
  sparkle.style.top=(rect.top+rect.height/2)+'px';
  document.body.appendChild(sparkle);
  setTimeout(()=>{sparkle.remove();},1000);
}
</script>
</body>
</html>
