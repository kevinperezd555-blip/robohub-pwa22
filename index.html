<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>RoboHub ðŸ¤–</title>
<style>
body { font-family: Arial, sans-serif; margin:0; padding:0; background:#f4f7fc; }
#loginScreen, #mainApp { display:none; }
header { background:#0056d6; color:white; padding:20px; text-align:center; font-size:24px; font-weight:bold; }
#welcomeMsg { text-align:center; font-size:18px; margin:15px 0; color:#333; }
ul { list-style:none; padding:0; margin:0; }
li { background:white; margin:8px; padding:12px; border-radius:10px; cursor:pointer; box-shadow:0 2px 6px rgba(0,0,0,0.1); transition: transform 0.1s, background 0.2s; }
li:hover { transform:scale(1.02); background-color:#eaf4ff; }
.completed { text-decoration: line-through; opacity:0.7; background-color:#d4edda; }
button { padding:10px 15px; margin:5px; border:none; border-radius:8px; cursor:pointer; font-weight:bold; }
.btn-upload { background:#28a745; color:white; }
.btn-add { background:#ffc107; color:#333; }
.btn-check { background:#17a2b8; color:white; }
.btn-inventory { background:#6f42c1; color:white; }
#loginScreen { display:flex; justify-content:center; align-items:center; height:100vh; background:#e3ebff; }
#loginCard { background:white; padding:35px; border-radius:15px; box-shadow:0 6px 20px rgba(0,0,0,0.25); text-align:center; width:90%; max-width:350px; }
#loginCard input { width:100%; padding:12px; margin-bottom:12px; border:1px solid #ccc; border-radius:8px; font-size:16px; }
#loginCard button { width:100%; padding:12px; background:#0056d6; color:white; border:none; border-radius:8px; font-size:16px; cursor:pointer; font-weight:bold; }
#errorMsg { color:red; font-size:14px; height:18px; margin-bottom:10px; }
#logoutBtn { display:block; margin:10px auto; padding:10px 14px; background:#dc3545; color:white; border:none; border-radius:8px; cursor:pointer; font-weight:bold; }
section { padding:0 15px 20px 15px; }
h2 { color:#0056d6; margin-top:20px; }
@media (max-width: 500px) {
  li { margin:6px 0; padding:10px; font-size:14px; }
  button { padding:10px 14px; font-size:14px; }
}
</style>
</head>
<body>

<!-- Login Screen -->
<div id="loginScreen">
  <div id="loginCard">
    <h2>RoboHub Login</h2>
    <input type="text" id="username" placeholder="Enter username">
    <div id="errorMsg"></div>
    <button onclick="signIn()">Sign In</button>
  </div>
</div>

<!-- Main App -->
<div id="mainApp">
<header>RoboHub ðŸ¤–</header>
<div id="welcomeMsg"></div>
<button id="logoutBtn" onclick="logOut()">Log Out</button>

<section>
<h2>Inventory</h2>
<ul id="inventory"></ul>
<button class="btn-inventory" onclick="addInventory()">Add Inventory</button>
</section>

<section>
<h2>Task Board</h2>
<ul id="tasks"></ul>
<button class="btn-add" onclick="addTask()">Add Task</button>
</section>

<section>
<button class="btn-upload" onclick="alert('Upload Design feature coming soon!')">Upload Design</button>
<button class="btn-check" onclick="checkInventory()">Check Inventory</button>
</section>

</div>

<script>
// Elements
const loginScreen = document.getElementById('loginScreen');
const mainApp = document.getElementById('mainApp');
const inventoryList = document.getElementById('inventory');
const tasksList = document.getElementById('tasks');

// Load data or set defaults
let inventory = JSON.parse(localStorage.getItem('inventory')) || { Servo:3, Motor:5, Sensors:7 };
let tasks = JSON.parse(localStorage.getItem('tasks')) || [
  "Build chassis (Jacob)",
  "Wire motors (Kevin)"
];

// Save to localStorage
function saveData() {
  localStorage.setItem('inventory', JSON.stringify(inventory));
  localStorage.setItem('tasks', JSON.stringify(tasks));
}

// Update inventory UI
function updateInventoryUI() {
  inventoryList.innerHTML='';
  for(let item in inventory){
    const li = document.createElement('li');
    li.textContent = `${item}: ${inventory[item]}`;
    inventoryList.appendChild(li);
  }
}

// Update tasks UI
function updateTasksUI() {
  tasksList.innerHTML='';
  tasks.forEach((task,index)=>{
    const li=document.createElement('li');
    li.textContent=task;
    if(task.endsWith('âœ…')) li.classList.add('completed');
    li.onclick = () => completeTask(index);
    tasksList.appendChild(li);
  });
}

// Welcome message
function showWelcome(){
  const username = localStorage.getItem('username') || '';
  document.getElementById('welcomeMsg').textContent = username ? `Welcome, ${username}!` : '';
}

// Sign in
function signIn(){
  const username = document.getElementById('username').value.trim();
  const errorDiv = document.getElementById('errorMsg');
  if(username){
    errorDiv.textContent='';
    localStorage.setItem('username', username);
    loginScreen.style.display='none';
    mainApp.style.display='block';
    showWelcome();
    updateInventoryUI();
    updateTasksUI();
  } else {
    errorDiv.textContent='Please enter a username';
  }
}

// Log out
function logOut(){
  localStorage.removeItem('username');
  document.getElementById('username').value='';
  loginScreen.style.display='flex';
  mainApp.style.display='none';
}

// Add Task with inventory suggestion
function addTask(){
  const task = prompt('Enter new task (format: Task Name (Person))');
  if(task){
    let suggested = [];
    if(task.toLowerCase().includes('motor')) suggested.push('Motor');
    if(task.toLowerCase().includes('servo')) suggested.push('Servo');
    if(task.toLowerCase().includes('sensor')) suggested.push('Sensors');
    if(suggested.length>0){
      alert(`Suggested inventory items for this task: ${suggested.join(', ')}`);
    }
    tasks.push(task);
    saveData();
    updateTasksUI();
  }
}

// Complete task and auto-reduce inventory
function completeTask(index){
  const task = tasks[index];
  if(!task.endsWith('âœ…') && confirm(`Mark "${task}" complete?`)){
    if(task.toLowerCase().includes('motor')) inventory.Motor = Math.max(0, inventory.Motor-1);
    if(task.toLowerCase().includes('servo')) inventory.Servo = Math.max(0, inventory.Servo-1);
    if(task.toLowerCase().includes('sensor')) inventory.Sensors = Math.max(0, inventory.Sensors-1);
    tasks[index] += ' âœ…';
    saveData();
    updateInventoryUI();
    updateTasksUI();
  }
}

// Check inventory popup
function checkInventory(){
  let message="Current Inventory:\n";
  for(let item in inventory) message+=`${item}: ${inventory[item]}\n`;
  alert(message);
}

// Add inventory
function addInventory(){
  const item = prompt('Item name to add:');
  const qty = parseInt(prompt('Quantity:'),10);
  if(item && !isNaN(qty)){
    if(inventory[item]) inventory[item]+=qty;
    else inventory[item]=qty;
    saveData();
    updateInventoryUI();
  }
}

// On page load
window.onload = function(){
  const username = localStorage.getItem('username');
  loginScreen.style.display = username ? 'none' : 'flex';
  mainApp.style.display = username ? 'block' : 'none';
  if(username){
    showWelcome();
    updateInventoryUI();
    updateTasksUI();
  }
};
</script>

</body>
</html>
