<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>RoboHub Ultimate 7.0</title>
<style>
body { font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin:0; background:#0f0f20; color:#fff; transition:0.5s; overflow-x:hidden;}
nav { background:#121232; color:white; display:flex; justify-content:space-between; align-items:center; padding:10px 20px; box-shadow:0 3px 10px rgba(0,0,0,0.5); }
nav button { border:none; padding:8px 12px; border-radius:6px; cursor:pointer; font-weight:bold; transition:0.3s; background:#2575fc; color:white; margin-left:5px;}
nav button:hover { box-shadow:0 0 15px #0ff; transform:scale(1.05);}
#alerts { padding:10px 20px; margin:10px 20px; border-radius:8px; max-height:120px; overflow-y:auto; background:rgba(255,0,0,0.2);}
#alerts .alert { margin:5px 0; padding:5px 10px; border-radius:6px; background:#ff4444; color:white; animation:pulse 1s infinite; }
@keyframes pulse {0% {box-shadow:0 0 5px #ff0000;}50%{box-shadow:0 0 20px #ff4444;}100%{box-shadow:0 0 5px #ff0000;}}
.container { display:grid; grid-template-columns:1fr 1fr; gap:20px; padding:20px; }
.card { background:rgba(20,20,40,0.85); padding:20px; border-radius:12px; box-shadow:0 0 20px rgba(0,255,255,0.2); transition:0.3s; }
.card:hover { box-shadow:0 0 30px rgba(0,255,255,0.5); transform:scale(1.02);}
ul { list-style:none; padding:0; max-height:300px; overflow-y:auto; }
li { background:rgba(30,30,60,0.85); margin:5px 0; padding:10px; border-radius:6px; display:flex; justify-content:space-between; align-items:center; cursor:pointer; transition:0.5s; opacity:1; }
li.fade-out { opacity:0; transform:translateX(50px); }
.btn { background:#2575fc; color:white; border:none; padding:10px 14px; border-radius:6px; cursor:pointer; transition:0.3s; margin-top:5px; }
.btn:hover { box-shadow:0 0 15px #0ff; transform:scale(1.05);}
input, select { padding:8px; border-radius:6px; border:1px solid #0ff; margin-bottom:10px; width:100%; background:#121232; color:white; touch-action:manipulation; }
canvas { max-width:100%; height:auto; border-radius:12px;}
#toast { position:fixed; bottom:10px; right:10px; background:#222; color:white; padding:10px 15px; border-radius:5px; display:none; z-index:20; box-shadow:0 0 10px #0ff; }

/* DARK/LIGHT MODE */
body.light-mode { background:#f0f0f0; color:#111; }
body.light-mode .card { background:#fff; color:#111; box-shadow:0 0 20px rgba(0,0,0,0.2);}
body.light-mode nav { background:#ddd; color:#111; box-shadow:0 3px 10px rgba(0,0,0,0.2);}
body.light-mode input, body.light-mode select { background:#eee; color:#111; border:1px solid #111;}
body.light-mode .btn { background:#2575fc; color:#fff;}
body.light-mode li { background:#eee; color:#111;}
body.light-mode #alerts { background:rgba(255,0,0,0.1); color:#111;}

/* MOBILE RESPONSIVE */
@media (max-width: 900px) {
  .container { grid-template-columns: 1fr; padding: 10px; }
  nav { flex-direction: column; align-items: flex-start; }
  nav button { margin: 5px 0 0 0; }
  .card { padding: 15px; }
  input, select { font-size: 14px; }
  button.btn { font-size: 14px; padding: 8px 10px; }
  canvas { max-height: 250px; }
  #inventoryList, #taskList { max-height: 200px; }
}
</style>
</head>
<body>

<canvas id="particleCanvas" style="position:fixed;top:0;left:0;width:100%;height:100%;z-index:-1;"></canvas>

<audio id="alertSound" src="https://www.myinstants.com/media/sounds/bleep.mp3"></audio>
<audio id="clickSound" src="https://www.myinstants.com/media/sounds/bleep.mp3"></audio>
<div id="toast"></div>

<div id="loginScreen" style="display:flex;justify-content:center;align-items:center;height:100vh;">
  <div style="background:#111133;padding:40px 50px;border-radius:12px;width:350px; text-align:center;">
    <h1 style="margin-bottom:20px;color:#0ff;">ü§ñ RoboHub Ultimate</h1>
    <input id="username" placeholder="Username"/>
    <input id="password" type="password" placeholder="Password"/>
    <select id="role">
      <option value="student">Student</option>
      <option value="teacher">Teacher</option>
    </select>
    <button class="btn" onclick="signIn()">Sign In</button>
  </div>
</div>

<div id="mainApp" style="display:none;">
<nav>
  <div style="font-weight:bold;font-size:18px;">ü§ñ RoboHub - <span id="navUser"></span></div>
  <div>
    <button onclick="toggleDarkMode()">üåì Toggle Theme</button>
    <button onclick="signOut()" style="background:#ff4444;">Logout</button>
  </div>
</nav>

<div id="alerts"></div>

<div class="container">
  <div class="card">
    <h2>üì¶ Inventory</h2>
    <input type="text" id="inventorySearch" placeholder="Search inventory..." onkeyup="renderInventory()"/>
    <ul id="inventoryList"></ul>
    <button class="btn" onclick="addInventory()">+ Add Item</button>
    <button class="btn" onclick="restockLow()">üí´ Restock Low Items</button>
  </div>

  <div class="card">
    <h2>üìù Task Board</h2>
    <input type="text" id="taskSearch" placeholder="Search tasks..." onkeyup="renderTasks()"/>
    <ul id="taskList"></ul>
    <button class="btn" onclick="addTask()">+ Add Task</button>
    <button class="btn" onclick="generateRandomTask()">üé≤ Random Task</button>
    <button class="btn" onclick="completeOverdue()">‚úÖ Complete All Overdue</button>
  </div>

  <div class="card" style="grid-column:span 2;">
    <h2>üìä Dashboard</h2>
    <canvas id="taskChart"></canvas>
    <canvas id="inventoryChart" style="margin-top:20px;"></canvas>
    <div style="margin-top:10px;">
      <strong>Overdue Tasks:</strong> <span id="statOverdue"></span> | 
      <strong>Low Stock Items:</strong> <span id="statLowStock"></span> | 
      <strong>Total Tasks:</strong> <span id="statTotalTasks"></span>
    </div>
  </div>
</div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
let inventory = [];
let tasks = [];

const canvas = document.getElementById('particleCanvas');
const ctx = canvas.getContext('2d');
function resizeCanvas(){ canvas.width=window.innerWidth; canvas.height=window.innerHeight;}
window.addEventListener('resize', resizeCanvas);
resizeCanvas();
let particlesArray=[];
class Particle{ constructor(){ this.x=Math.random()*canvas.width; this.y=Math.random()*canvas.height; this.size=Math.random()*2+1; this.speedX=(Math.random()-0.5)*1.5; this.speedY=(Math.random()-0.5)*1.5; }
update(){ this.x+=this.speedX; this.y+=this.speedY; if(this.x<0)this.x=canvas.width;if(this.x>canvas.width)this.x=0;if(this.y<0)this.y=canvas.height;if(this.y>canvas.height)this.y=0;}
draw(){ ctx.fillStyle='rgba(0,255,255,'+this.size/3+')'; ctx.beginPath(); ctx.arc(this.x,this.y,this.size,0,Math.PI*2); ctx.fill();}}
function initParticles(num=150){ if(window.innerWidth<600) num=60; particlesArray=[]; for(let i=0;i<num;i++) particlesArray.push(new Particle());}
initParticles();
function animateParticles(){ ctx.clearRect(0,0,canvas.width,canvas.height); particlesArray.forEach(p=>{p.update();p.draw();}); requestAnimationFrame(animateParticles);}
animateParticles();

function signIn() {
  const username = document.getElementById('username').value.trim();
  const role = document.getElementById('role').value || 'student';
  if(username.length>0){
    document.getElementById('loginScreen').style.display='none';
    document.getElementById('mainApp').style.display='block';
    document.getElementById('navUser').textContent=username+' ('+role+')';
    renderAll();
    updateCharts();
    showToast('Signed in as '+username);
  } else { alert("Enter a username!"); }
}

function signOut(){ document.getElementById('mainApp').style.display='none'; document.getElementById('loginScreen').style.display='flex'; showToast('Signed out');}

function toggleDarkMode(){ document.body.classList.toggle('light-mode'); if(document.body.classList.contains('light-mode')) showToast('Light Mode ON'); else showToast('Dark Mode ON');}

function showToast(msg){ const toast=document.getElementById('toast'); toast.textContent=msg; toast.style.display='block'; setTimeout(()=>{toast.style.display='none';},2000);}

function fadeOutAndRemove(el){ el.classList.add('fade-out'); setTimeout(()=>el.remove(),500); }

function renderInventory(){ const list=document.getElementById('inventoryList'); list.innerHTML=''; inventory.forEach((item,index)=>{ const li=document.createElement('li'); li.textContent=item.name+' ('+item.quantity+')'; li.onclick=()=>{item.quantity--; if(item.quantity<=0) fadeOutAndRemove(li); renderAll(); updateCharts(); showToast('Used 1 '+item.name);} list.appendChild(li); }); }

function renderTasks(){ const list=document.getElementById('taskList'); list.innerHTML=''; tasks.forEach((task,index)=>{ const li=document.createElement('li'); li.textContent=task.name+' ['+task.assignee+']'; li.onclick=()=>{fadeOutAndRemove(li); tasks.splice(index,1); renderAll(); updateCharts(); showToast('Completed task: '+task.name);} list.appendChild(li); }); }

function renderAll(){ renderInventory(); renderTasks(); updateStats(); }

function updateStats(){ document.getElementById('statOverdue').textContent=tasks.length; document.getElementById('statLowStock').textContent=inventory.filter(i=>i.quantity<=2).length; document.getElementById('statTotalTasks').textContent=tasks.length;}

let taskChart, inventoryChart;
function updateCharts(){
  const ctx1=document.getElementById('taskChart').getContext('2d');
  const ctx2=document.getElementById('inventoryChart').getContext('2d');
  const taskData={labels:tasks.map(t=>t.name), datasets:[{label:'Tasks', data:tasks.map(t=>1), backgroundColor:'rgba(0,255,255,0.5)'}]};
  const inventoryData={labels:inventory.map(i=>i.name), datasets:[{label:'Inventory Qty', data:inventory.map(i=>i.quantity), backgroundColor:'rgba(255,255,0,0.5)'}]};
  if(taskChart) taskChart.destroy();
  if(inventoryChart) inventoryChart.destroy();
  taskChart=new Chart(ctx1,{type:'bar',data:taskData,options:{plugins:{legend:{display:false}},responsive:true}});
  inventoryChart=new Chart(ctx2,{type:'bar',data:inventoryData,options:{plugins:{legend:{display:false}},responsive:true}});
}

function addInventory(){ const name=prompt('Item Name'); const qty=parseInt(prompt('Quantity')); if(name && qty){ inventory.push({name:name,quantity:qty}); renderAll(); updateCharts(); showToast('Added '+name); }}
function addTask(){ const name=prompt('Task Name'); const assignee=prompt('Assignee'); if(name && assignee){ tasks.push({name:name,assignee:assignee}); renderAll(); updateCharts(); showToast('Added task: '+name); }}
function generateRandomTask(){ const taskNames=['Build Chassis','Wire Motors','Test Sensors','Calibrate Arm','Install Battery']; const names=taskNames[Math.floor(Math.random()*taskNames.length)]; tasks.push({name:names,assignee:'Auto'}); renderAll(); updateCharts(); showToast('Random Task Added'); }
function restockLow(){ inventory.forEach(i=>{if(i.quantity<3)i.quantity=5}); renderAll(); updateCharts(); showToast('Restocked Low Items'); }
function completeOverdue(){ tasks=[]; renderAll(); updateCharts(); showToast('All Overdue Tasks Completed'); }

renderAll();
updateCharts();
</script>
</body>
</html>
